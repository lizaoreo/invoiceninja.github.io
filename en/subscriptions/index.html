<!DOCTYPE html>
<html lang="en">

<head>
    <title>Free Source Available Invoicing, Expenses &amp; Time-Tracking | Invoice Ninja</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="referrer" content="always">
    <link rel="canonical" href="https://invoiceninja.github.io/en/subscriptions">
    <meta name="description" content="The leading free source available online invoicing app for freelancers &amp; businesses. Invoice, accept payments, track expenses, &amp; time-tasks">
    <meta name="docsearch:language" content="en" />
    <meta name="docsearch:version" content="v1.0.1" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" href="/assets/build/css/main.css?id=1fe1535b0c374cd42dcb58191ce1d8f2">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="icon" type="image/png" href="/assets/images/favicon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lunr/lunr.js"></script>
        <script type="text/javascript" src="/en_index.js"></script>
    <script type="text/javascript" src="/en.js"></script>
        <style>
      .search-wrapper {
        /* position: relative; */
        /* display: inline-block; */
        /* max-width: 50%;  */
      }

        .results-list {
        position: absolute;
        background-color: white;
        /* border: 1px solid #ccc; */
        padding: 0;
        margin: 0;
        list-style: none;
        max-height: 400px;
        max-width:800px;
        overflow-y: scroll;
        width: calc(100% - 2px);
        z-index: 10000;
        top: 100%; /* This will pin the dropdown to the bottom of the search input */
        left: auto;
        right: auto;
        border-top-left-radius: 0; 
        border-top-right-radius: 0;
        border-bottom-left-radius: 0.25rem;
        /* /* border-bottom-right-radius: 0.25rem; */
        }

        .results-list li {
        padding: 8px;
        cursor: pointer;
        }

        .results-list li:hover {
        background-color: #eee;
        }
        .result-item {
          padding: 16px;
          cursor: pointer;
          border-bottom: 1px solid #f0f0f0;
        }

        .result-item:last-child {
          border-bottom: none;
        }

        .result-item:hover {
          background-color: #f9f9f9;
        }

        .result-title {
          font-size: 16px;
          font-weight: bold;
          margin-bottom: 4px;
        }

        .result-description {
          font-size: 14px;
          color: #777;
        }

    </style>
 
   <script>

      document.addEventListener('DOMContentLoaded', function () {

      let idx = lunr.Index.load(data);

      const input = document.getElementById('search-input');
      const resultsList = document.getElementById('results-list');

      input.addEventListener('input', function () {
        const query = input.value.toLowerCase().trim();

        const results = idx.search(query);

        // Clear previous results
        resultsList.innerHTML = '';

        if (query === '') {
          resultsList.style.display = 'none';
          return;
        }
        // Populate the dropdown results list
        results.forEach(result => {
        
          const matchedDoc = documents.find(doc => doc.id == result.ref);
        
          const li = document.createElement('li');
          li.className = 'result-item';

          const a = document.createElement('a');
          a.href = matchedDoc.uri;
          a.style.textDecoration = 'none'; // Remove the default underline from the link

          const div = document.createElement('div');
          div.className = 'result-title';
          div.textContent = matchedDoc.title + ' | ' + matchedDoc.sub_title;
          a.appendChild(div);

          const div2 = document.createElement('div');
          div2.className = 'result-description';
          div2.textContent = matchedDoc.body.substring(0, 150) + '...';
          a.appendChild(div2);

          li.appendChild(a);
          resultsList.appendChild(li);

        });

        resultsList.style.display = results.length ? 'block' : 'none';

      });

      // Hide the dropdown results list when clicking outside the search box
      document.addEventListener('click', function (event) {
        if (!event.target.closest('#search-box')) {
          resultsList.style.display = 'none';
        }
      });

      input.addEventListener('keydown', function (e) {
        if (e.key === 'ArrowUp') {
          e.preventDefault(); // Prevent scrolling the page
          selectResult(selectedIndex - 1);
        } else if (e.key === 'ArrowDown') {
          e.preventDefault(); // Prevent scrolling the page
          selectResult(selectedIndex + 1);
        } else if (e.key === 'Enter' && selectedIndex >= 0 && selectedIndex < resultsList.children.length) {
          
          window.location.href = resultsList.children[selectedIndex].children[0].href;
        }
      });

      let selectedIndex = -1;

      function selectResult(index) {
        // Deselect the previously selected item
        if (selectedIndex >= 0 && selectedIndex < resultsList.children.length) {
          resultsList.children[selectedIndex].classList.remove('bg-gray-200');
        }

        selectedIndex = index;

        // Select the new item
        if (selectedIndex >= 0 && selectedIndex < resultsList.children.length) {
          resultsList.children[selectedIndex].classList.add('bg-gray-200');

          // Smoothly scroll to the selected item
          resultsList.children[selectedIndex].scrollIntoView({
            block: 'nearest',
            behavior: 'smooth'
          });
        }
      }


      document.addEventListener('keydown', (e) => {

        if (e.key.toLowerCase() == 'k' && e.ctrlKey) {
              // Add your code here
              
            e.preventDefault(); // Prevent scrolling the page

            console.log("yoyo");

              input.focus();
          }
      });


    });



  </script>

    <link rel="stylesheet"
          href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/agate.min.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>

    <script>hljs.highlightAll();</script>
</head>

<meta name="locale" content="en">

<nav class="py-4 sticky top-0 z-40 lg:z-50 w-full bg-white border-b">
    <div id="navigation-content" class="grid grid-cols-12">
        <div class="float-left pl-4 col-span-2">
            <a href="/en" id=""><img class="object-contain h-10 mt-2	"
                src="/assets/images/logo-rounded.png"
                alt="Invoice Ninja logo"/>
            </a>    
        </div>
                <div class="search-wrapper w-full col-span-5 flex justify-center"  id="search-box">
                <input type="text" id="search-input" placeholder="Search Invoice Ninja... (Ctrl K)" class="h-14 text-lg focus:outline-none rounded-mdsm:max-w-xs">
            <ul id="results-list" class="results-list"></ul>
        </div>
        <!-- <input type="text" placeholder="Quick search ..." id="topSearchBox" data-lpignore="true"
                class="pb-1 border-b hover:border-ninja-blue focus:border-ninja-blue focus:outline-none"> -->
                <div id="right-side-items" class="text-sm w-full col-span-5 flex flex-grow justify-end pr-5">
            <div class="hidden md:hidden lg:block md:space-x-2">
                <span>
                       <a href="/en/user-guide" class="py-2 border-b border-transparent hover:border-ninja-blue">User Guide</a>
                </span>
                <span>
                       <a href="https://api-docs.invoicing.co/" target="_blank"
                   class="py-2 border-b border-transparent hover:border-ninja-blue">API Documentation</a>
                </span>
                <span>
                <a target="_blank" href="https://invoicing.co" class="px-5 py-2 border rounded-full hover:border-ninja-blue">Go to app</a>
                </span>
                <span>
                <select id="locale" onchange="this.options[this.selectedIndex].value && (window.location = '/' + this.options[this.selectedIndex].value);" class="mt-2 rounded-md border-0 py-1.5 pl-1 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6">
                    <option value="en">EN</option>
                    <option value="fr_CA">Fr (CA)</option>
                </select>
                </span>
            </div>
            <div class="flex flex-col lg:hidden">
                <button id="mobile-menu-toggle" class="focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-menu">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>
            
        </div>
    </div>
    <div id="mobile-menu" class="hidden px-4 pt-4 flex flex-col">
        <a href="/en/getting-started"
           class="py-2 border-b border-transparent hover:border-ninja-blue"> User Guide </a>
        <a href="https://api-docs.invoicing.co/" target="_blank"
           class="py-2 border-b border-transparent hover:border-ninja-blue"> API Documentation </a>
        <a href="https://invoicing.co" target="_blank"
           class="py-2 border-b border-transparent hover:border-ninja-blue"> Go to app</a>
        <select id="locale_mobile" onchange="this.options[this.selectedIndex].value && (window.location = '/' + this.options[this.selectedIndex].value);" class="mt-2 rounded-md border-0 py-1.5 pl-3 pr-5 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6">
            <option value="en">EN</option>
            <option value="fr_CA">Fr (CA)</option>
        </select>
    </div>
</nav>

<script>

    let element = document.getElementById('locale_mobile');
    element.value = document.querySelector('meta[name="locale"]').content;

    let element2 = document.getElementById('locale');
    element2.value = document.querySelector('meta[name="locale"]').content;

</script>
<body class="font-sans antialiased text-gray-900 bg-white ">
        <div class="hidden top-0 absolute z-40 bg-white w-full h-screen" id="mobile-menu-overlay">
       <div class="p-6 flex items-top justify-between">
           <div>
                                  <div clasS="mb-8">
                       <a class="block hover:text-ninja-blue font-semibold uppercase "
                          href="/en/getting-started">User Guide</a>

                       <div class="mt-2">
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/user-guide">Getting Started</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/banking">Banking</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/clients">Clients</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/credits">Credits</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/expenses">Expenses</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/invoices">Invoices</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/payments">Payments</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/products">Products</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/projects">Projects</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/purchase_orders">Purchase Orders</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/recurring-expenses">Recurring Expenses</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/recurring-invoices">Recurring Invoices</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/reports">Reports</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/quotes">Quotes</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/subscriptions">Subscriptions</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/tasks">Tasks</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/taxes">Taxes</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/transactions">Transactions</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/vendors">Vendors</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/basic-settings">Basic Settings</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/advanced-settings">Advanced Settings</a>
                                                  </div>
                   </div>
                                  <div clasS="mb-8">
                       <a class="block hover:text-ninja-blue font-semibold uppercase "
                          href="#">Advanced Topics</a>

                       <div class="mt-2">
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/email-customization">Email Customization</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/import-and-export">Import/Export</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/custom-fields">PDF Customization</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/gateways">Payment Gateways</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/qr-codes">QR Codes</a>
                                                  </div>
                   </div>
                                  <div clasS="mb-8">
                       <a class="block hover:text-ninja-blue font-semibold uppercase "
                          href="/en/hosted-quickstart">Hosted</a>

                       <div class="mt-2">
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-quickstart">Quick Start</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-activate">Activate</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-custom-domain">Custom Domain</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-migration">Hosted Migration</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-mail">Mail Servers</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-stripe">Stripe Integration</a>
                                                  </div>
                   </div>
                          </div>
           <div>
                <button onclick="document.getElementById('mobile-menu-overlay').classList.add('hidden');">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
           </div>
       </div>
    </div>

    <div class="max-w-12xl grid grid-cols-12 py-2 px-2 lg:mx-auto">
        <div class="hidden space-y-6 md:block lg:col-span-2">
            <div class="hidden lg:block fixed mt-2 h-full overflow-y-auto pb-32 pr-16 pl-4">
                                    <div clasS="mb-8">
                        <a class="block hover:text-ninja-blue font-semibold uppercase "
                          href="/en/getting-started">User Guide</a>


                        <div class="mt-2">
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/user-guide">Getting Started</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/banking">Banking</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/clients">Clients</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/credits">Credits</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/expenses">Expenses</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/invoices">Invoices</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/payments">Payments</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/products">Products</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/projects">Projects</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/purchase_orders">Purchase Orders</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/recurring-expenses">Recurring Expenses</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/recurring-invoices">Recurring Invoices</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/reports">Reports</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/quotes">Quotes</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/subscriptions">Subscriptions</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/tasks">Tasks</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/taxes">Taxes</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/transactions">Transactions</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/vendors">Vendors</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/basic-settings">Basic Settings</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/advanced-settings">Advanced Settings</a>
                                                    </div>
                    </div>
                                    <div clasS="mb-8">
                        <a class="block hover:text-ninja-blue font-semibold uppercase "
                          href="#">Advanced Topics</a>


                        <div class="mt-2">
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/email-customization">Email Customization</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/import-and-export">Import/Export</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/custom-fields">PDF Customization</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/gateways">Payment Gateways</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/qr-codes">QR Codes</a>
                                                    </div>
                    </div>
                                    <div clasS="mb-8">
                        <a class="block hover:text-ninja-blue font-semibold uppercase "
                          href="/en/hosted-quickstart">Hosted</a>


                        <div class="mt-2">
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-quickstart">Quick Start</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-activate">Activate</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-custom-domain">Custom Domain</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-migration">Hosted Migration</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-mail">Mail Servers</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/en/hosted-stripe">Stripe Integration</a>
                                                    </div>
                    </div>
                            </div>
        </div> <!-- End of sidebar -->

        <div class="col-span-12 md:col-span-8 prose mx-auto max-w-max" id="page-content">
            <div class="block lg:hidden flex flex-col mb-4 lg:mb-0">
                <button onclick="document.getElementById('mobile-menu-overlay').classList.remove('hidden');">&#8592; Documentation</button>
            </div>

            <h1>Subscriptions</h1>

<h2>Introduction</h2>

<p>Subscriptions are a supercharged version of our Buy Now links from version 4.</p>

<p>In version 5 subscriptions allow you to build an instant shop front where you can bundle your existing products into direct link purchases.</p>

<p><img src="/assets/images/subscriptions/subscription_list.png" alt="alt text" title="Subscription list" /></p>

<p><img src="/assets/images/subscriptions/subscription_overview.png" alt="alt text" title="Subscription overview" /></p>

<p>When you create a subscription a direct link is generated which is available to use to directly purchase the given subscription. It is important to note that even thou we have termed this functionality subscriptions, you can still generate direct links to one time purchases. This could be suitable for digital sales that are one time rather than recurring.</p>

<p><img src="/assets/images/subscriptions/subscription_products.png" alt="alt text" title="Subscription products" /></p>

<p>When you create the subscription you are able to combine one time and recurring products into a single subscriptions. For example, lets say you run a hosting business and want to create a subscription which has a single Setup charge as well as a monthly recurring charge for the server.</p>

<p>When your client purchases this, the Setup charge will only be applied to the first invoice, and then a recurring invoice is generated for any recurring products in the subscription.</p>

<p>If you want to allow your clients to move between subscriptions then this is possible by creating a Group and adding each subscription to the group. This bundles all of the subscriptions tagged with the same group together!</p>

<p><img src="/assets/images/subscriptions/subscription_settings.png" alt="alt text" title="Subscription settings" /></p>

<p>The settings pane allows you to define the frequency / auto billing and also promo codes/discounts. We also have integrated the ability for end user self service to change between subscriptions or even cancel these subscriptions. We also handle the accounting for you for refunds if they are defined.</p>

<p><img src="/assets/images/subscriptions/subscription_webhooks.png" alt="alt text" title="Subscription webhooks" /></p>

<p>The final piece of the subscriptions puzzle is integrating with third party services. When a subscription is purchased / cancelled / upgraded we can notify a third party end point!</p>

<h2>Webhook configuration</h2>

<p>If you need to control events that occur outside of Invoice Ninja, you can configure the webhook endpoints to receive information as the user is stepping through the checkout process. All endpoints must be supported if you activate this feature of the application as the app will fail to proceed without a successful response from each of the following:</p>

<p><div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Webhooks are single time events that do not retry if your endpoint is unavailable.</span>
</div></p>

<h3>Eligibility checker</h3>

<p>This request queries the endpoint whether the client/contact is eligible to continue through the checkout. You may use this if you wish to restrict users to one subscription at a time, the payload that is sent to the endpoint looks like this</p>

<pre><code>{
    "context" : "is_eligible",
    "subscription" : "l4zbq7repr",
    "contact" : "l4zbq7repr",
    "contact_email" : "customer@example.com",
    "client" : "l4zbq7repr",
    "account_key" : "unique_identifier",
}
</code></pre>

<h4>Parameters</h4>

<p><strong>context</strong>: (string) The context identifier, <code>is_eligible</code><br />
<strong>subscription</strong>: The id of the subscription<br />
<strong>contact</strong>: The id of the contact<br />
<strong>contact_email</strong>: The contact email<br />
<strong>client</strong>: The id of the client<br />
<strong>account_key</strong>: A client reference (client.custom_value2)</p>

<h4>Response</h4>

<p>A standard array should be returned under all circumstances, within the array will be two keys, a successful request will return the following response:</p>

<pre><code>{
    "message" : "Success",
    "status_code" : "200" / HTTP status code 2xx
}
</code></pre>

<p>A failed request would return the an array like this:</p>

<pre><code>{
    "message" : "A human readable failure message to pass back to the client",
    "status_code" : "403" / HTTP status code 4xx/5xx
}
</code></pre>

<h3>Start Trial</h3>

<p>If you have configured your subscription to be a trial based subscription. Then after the eligibility check, the system will attempt to start the trial, your endpoint will receive a payload like this:</p>

<pre><code>{
    "context" : "trial",
    "recurring_invoice" : "l4zbq7repr",
    "client" : "l4zbq7repr",
    "subscription" : "l4zbq7repr",
    "account_key" : "unique_identifier",
}
</code></pre>

<h4>Parameters</h4>

<p><strong>context</strong>: (string) The context identifier, <code>trial</code><br />
<strong>recurring_invoice</strong>: The id of the recurring invoice that was generated based on the subscription<br />
<strong>client</strong>: The id of the client<br />
<strong>subscription</strong>: The subscription id<br />
<strong>account_key</strong>: A client reference (client.custom_value2)</p>

<h4>Response</h4>

<p>A standard array should be returned under all circumstances, within the array will be two keys, a successful request will return the following response:</p>

<pre><code>{
    "message" : "Success",
    "status_code" : "200" / HTTP status code 2xx
}
</code></pre>

<p>A failed request would return the an array like this:</p>

<pre><code>{
    "message" : "A human readable failure message to pass back to the client",
    "status_code" : "403" / HTTP status code 4xx/5xx
}
</code></pre>

<h3>Recurring Purchase</h3>

<p>When a recurring subscription is created for the first time, a payload is sent to the endpoint to notify of a successful subscription creation and payment, the payload will look like this:</p>

<pre><code>{
    "context" : "recurring_purchase",
    "recurring_invoice" : "l4zbq7repr",
    "invoice" : "l4zbq7repr",
    "client" : "l4zbq7repr",
    "subscription" : "l4zbq7repr",
    "contact" : "l4zbq7repr",
    "account_key" : "unique_identifier",
}
</code></pre>

<h4>Parameters</h4>

<p><strong>context</strong>: (string) The context identifier, <code>recurring_purchase</code><br />
<strong>recurring_invoice</strong>: The id of the recurring invoice that was generated based on the subscription<br />
<strong>invoice</strong>: The id of the invoice that was generated based on the subscription<br />
<strong>client</strong>: The id of the client<br />
<strong>contact</strong>: The id of the contact<br />
<strong>subscription</strong>: The subscription id<br />
<strong>account_key</strong>: A client reference (client.custom_value2)</p>

<h4>Response</h4>

<p>A standard array should be returned under all circumstances, within the array will be two keys, a successful request will return the following response:</p>

<pre><code>{
    "message" : "Success",
    "status_code" : "200" / HTTP status code 2xx
}
</code></pre>

<p>A failed request would return the an array like this:</p>

<pre><code>{
    "message" : "A human readable failure message to pass back to the client",
    "status_code" : "403" / HTTP status code 4xx/5xx
}
</code></pre>

<h3>Single Purchase</h3>

<p>Where your subscription is only for a standard product, and <em>not</em> a recurring product, then your endpoint will receive a single purchase webhook with the following configuration:</p>

<pre><code>{
    "context" : "single_purchase",
    "invoice" : "l4zbq7repr",
    "client"  : "l4zbq7repr",
    "subscription" : "l4zbq7repr",
    "account_key" : "unique_identifier",
}
</code></pre>

<h4>Parameters</h4>

<p><strong>context</strong>: (string) The context identifier, <code>single_purchase</code><br />
<strong>invoice</strong>: The id of the invoice that was generated based on the subscription<br />
<strong>client</strong>: The id of the client<br />
<strong>subscription</strong>: The subscription id<br />
<strong>account_key</strong>: A client reference (client.custom_value2)</p>

<h4>Response</h4>

<p>A standard array should be returned under all circumstances, within the array will be two keys, a successful request will return the following response:</p>

<pre><code>{
    "message" : "Success",
    "status_code" : "200" / HTTP status code 2xx
}
</code></pre>

<p>A failed request would return the an array like this:</p>

<pre><code>{
    "message" : "A human readable failure message to pass back to the client",
    "status_code" : "403" / HTTP status code 4xx/5xx
}
</code></pre>

<h3>Change Plan</h3>

<p>If you support allowing clients to upgrade/downgrade their subscriptions, a change_plan webhook is fired.</p>

<p>When a client changes plans, there may be either a credit due, or a payment depending on the plan and pro rata refund that is generated. In these two cases, the payload differs with either a <code>credit</code> or <code>invoice</code> key appearing in the payload. The following are examples:</p>

<pre><code>{
    "context" : "change_plan",
    "recurring_invoice" : "l4zbq7repr",
    "credit" : "l4zbq7repr",
    "client" : "l4zbq7repr",
    "subscription" : "l4zbq7repr",
    "contact" : "l4zbq7repr",
    "account_key" : "unique_identifier",
}
</code></pre>

<pre><code>{
    "context" : "change_plan",
    "recurring_invoice" : "l4zbq7repr",
    "invoice" : "l4zbq7repr",
    "client" : "l4zbq7repr",
    "subscription" : "l4zbq7repr",
    "contact" : "l4zbq7repr",
    "account_key" : "unique_identifier",
}
</code></pre>

<h4>Parameters</h4>

<p><strong>context</strong>: (string) The context identifier, <code>change_plan</code><br />
<strong>invoice</strong>: The id of the invoice that was generated based on the subscription<br />
<strong>credit</strong>: The id of the credit that was generated based on the subscription <strong>note</strong> this field, <em>may</em> be blank if no credit was generated<br />
<strong>client</strong>: The id of the client<br />
<strong>contact</strong>: The id of the contact<br />
<strong>subscription</strong>: The subscription id<br />
<strong>account_key</strong>: A client reference (client.custom_value2)</p>

<h4>Response</h4>

<p>A standard array should be returned under all circumstances, within the array will be two keys, a successful request will return the following response:</p>

<pre><code>{
    "message" : "Success",
    "status_code" : "200" / HTTP status code 2xx
}
</code></pre>

<p>A failed request would return the an array like this:</p>

<pre><code>{
    "message" : "A human readable failure message to pass back to the client",
    "status_code" : "403" / HTTP status code 4xx/5xx
}
</code></pre>

<h3>Subscription Cancellation</h3>

<p>If you allow subscription cancellations, then the following payload is forwarded to the endpoint:</p>

<pre><code>{
    "context" : "cancellation",
    "subscription" : "l4zbq7repr",
    "recurring_invoice" : "l4zbq7repr",
    "client" : "l4zbq7repr",
    "contact" : "l4zbq7repr",
    "account_key" : "unique_identifier",
}
</code></pre>

<h4>Parameters</h4>

<p><strong>context</strong>: (string) The context identifier, <code>cancellation</code><br />
<strong>subscription</strong>: The subscription id<br />
<strong>recurring_invoice</strong>: The id of the recurring invoice that was generated based on the subscription<br />
<strong>client</strong>: The id of the client<br />
<strong>contact</strong>: The id of the contact<br />
<strong>account_key</strong>: A client reference (client.custom_value2)</p>

<h4>Response</h4>

<p>A standard array should be returned under all circumstances, within the array will be two keys, a successful request will return the following response:</p>

<pre><code>{
    "message" : "Success",
    "status_code" : "200" / HTTP status code 2xx
}
</code></pre>

<p>A failed request would return the an array like this:</p>

<pre><code>{
    "message" : "A human readable failure message to pass back to the client",
    "status_code" : "403" / HTTP status code 4xx/5xx
}
</code></pre>

<h3>Plan Expired</h3>

<p>A daily check is performed to check if any subscriptions have gone past their due date without a payment. If a subscription has been found to expired, a webhook is sent with the following payload:</p>

<pre><code>{
    "context" : "plan_expired",
    "client" : "l4zbq7repr",
    "invoice" : "l4zbq7repr",
    "subscription" : "l4zbq7repr",
}
</code></pre>

<h4>Parameters</h4>

<p><strong>context</strong>: (string) The context identifier, <code>plan_expired</code><br />
<strong>subscription</strong>: The subscription id<br />
<strong>invoice</strong>: The id of the invoice that was generated based on the subscription<br />
<strong>client</strong>: The id of the client</p>

<h4>Response</h4>

<p>A standard array should be returned under all circumstances, within the array will be two keys, a successful request will return the following response:</p>

<pre><code>{
    "message" : "Success",
    "status_code" : "200" / HTTP status code 2xx
}
</code></pre>

<p>A failed request would return the an array like this:</p>

<pre><code>{
    "message" : "A human readable failure message to pass back to the client",
    "status_code" : "403" / HTTP status code 4xx/5xx
}
</code></pre>

<h3>Plan Paid</h3>

<p>When a payment for a subscription is made (ie for a renewal), a Plan Paid webhook event is fired with the following configuration:</p>

<pre><code>{
    "context" : "plan_paid",
    "subscription" : "l4zbq7repr",
    "recurring_invoice" : "l4zbq7repr",
    "client" : "l4zbq7repr",
    "contact" : "l4zbq7repr",
    "invoice" : "l4zbq7repr",
    "account_key" : "l4zbq7repr",
}
</code></pre>

<h4>Parameters</h4>

<p><strong>context</strong>: (string) The context identifier, <code>plan_expired</code><br />
<strong>subscription</strong>: The subscription id<br />
<strong>recurring_invoice</strong>: The id of the recurring invoice that was generated based on the subscription<br />
<strong>invoice</strong>: The id of the invoice that was generated based on the subscription<br />
<strong>client</strong>: The id of the client<br />
<strong>contact</strong>: The id of the contact<br />
<strong>account_key</strong>: A client reference (client.custom_value2)</p>

<h4>Response</h4>

<p>A standard array should be returned under all circumstances, within the array will be two keys, a successful request will return the following response:</p>

<pre><code>{
    "message" : "Success",
    "status_code" : "200" / HTTP status code 2xx
}
</code></pre>

<p>A failed request would return the an array like this:</p>

<pre><code>{
    "message" : "A human readable failure message to pass back to the client",
    "status_code" : "403" / HTTP status code 4xx/5xx
}
</code></pre>

<p><div class="flex justify-end">
    <a class="text-blue-500 flex items-center" href="/en/tasks">
        <span>Tasks</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="p-0 mt-1 h-4" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="13 17 18 12 13 7"></polyline>
            <polyline points="6 17 11 12 6 7"></polyline>
        </svg>
    </a>
</div></p>

            <a href="https://github.com/invoiceninja/invoiceninja.github.io/blob/v5-rework/source/en/subscriptions.md"
               class="pt-4 border-t inline-flex items-center w-full block">
                <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="feather feather-github">
                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                </svg>
                <span class="ml-2">Want to contribute? Edit this page on GitHub!</span>
            </a>
        </div> <!-- End of main content -->

        <div class="hidden md:block col-span-2 p-4">
            <div class="fixed overflow-y-auto pr-4 h-full pl-4 pb-32 text-sm" id="toc-container">
                <!-- Placeholder for table of contents -->
                <span class="text-sm uppercase block mb-3 text-ninja-blue">On this page</span>
            </div>
        </div>
    </div>
        <script src="/assets/build/js/main.js?id=5d8f1025c2be8c2903a2ea7ba7775489"></script>

    <script>
        document.getElementById('mobile-menu-toggle').addEventListener('click', () => {
            let mobileMenu = document.getElementById('mobile-menu');

            if (mobileMenu.classList.contains('hidden')) {
                return mobileMenu.classList.remove('hidden');
            }

            return mobileMenu.classList.add('hidden');
        });
    </script>

    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript">
        docsearch({
            apiKey: '4816218e8381d5a17beacd84823e9ea3',
            indexName: 'invoiceninja',
            inputSelector: '#topSearchBox',
            debug: false,
            searchParameters: {
                facetFilters: ['language:en'],
            },
        });
    </script>
        <script type="text/javascript">
        docsearch({
            apiKey: '4816218e8381d5a17beacd84823e9ea3',
            indexName: 'invoiceninja',
            inputSelector: '#indexSearchBox',
            debug: false,
            searchParameters: {
                facetFilters: ['language:en'],
            },
        });
    </script> -->

<style>
.video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.video_container {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 56.25%;
}

</style>
</body>

</html>
