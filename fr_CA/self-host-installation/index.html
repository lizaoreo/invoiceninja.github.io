<!DOCTYPE html>
<html lang="fr_CA">

<head>
    <title>Free Source Available Invoicing, Expenses &amp; Time-Tracking | Invoice Ninja</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="referrer" content="always">
    <link rel="canonical" href="https://invoiceninja.github.io/fr_CA/self-host-installation">
    <meta name="description" content="The leading free source available online invoicing app for freelancers &amp; businesses. Invoice, accept payments, track expenses, &amp; time-tasks">
    <meta name="docsearch:language" content="fr_CA" />
    <meta name="docsearch:version" content="v1.0.1" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" href="/assets/build/css/main.css?id=1fe1535b0c374cd42dcb58191ce1d8f2">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
    <link rel="icon" type="image/png" href="/assets/images/favicon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lunr/lunr.js"></script>
        <script type="text/javascript" src="/fr_CA.js"></script>
    <script type="text/javascript" src="/fr_CA_index.js"></script>
        <style>
      .search-wrapper {
        /* position: relative; */
        /* display: inline-block; */
        /* max-width: 50%;  */
      }

        .results-list {
        position: absolute;
        background-color: white;
        /* border: 1px solid #ccc; */
        padding: 0;
        margin: 0;
        list-style: none;
        max-height: 400px;
        max-width:800px;
        overflow-y: scroll;
        width: calc(100% - 2px);
        z-index: 10000;
        top: 100%; /* This will pin the dropdown to the bottom of the search input */
        left: auto;
        right: auto;
        border-top-left-radius: 0; 
        border-top-right-radius: 0;
        border-bottom-left-radius: 0.25rem;
        /* /* border-bottom-right-radius: 0.25rem; */
        }

        .results-list li {
        padding: 8px;
        cursor: pointer;
        }

        .results-list li:hover {
        background-color: #eee;
        }
        .result-item {
          padding: 16px;
          cursor: pointer;
          border-bottom: 1px solid #f0f0f0;
        }

        .result-item:last-child {
          border-bottom: none;
        }

        .result-item:hover {
          background-color: #f9f9f9;
        }

        .result-title {
          font-size: 16px;
          font-weight: bold;
          margin-bottom: 4px;
        }

        .result-description {
          font-size: 14px;
          color: #777;
        }

    </style>
 
   <script>

      document.addEventListener('DOMContentLoaded', function () {

      let idx = lunr.Index.load(data);

      const input = document.getElementById('search-input');
      const resultsList = document.getElementById('results-list');

      input.addEventListener('input', function () {
        const query = input.value.toLowerCase().trim();

        const results = idx.search(query);

        // Clear previous results
        resultsList.innerHTML = '';

        if (query === '') {
          resultsList.style.display = 'none';
          return;
        }
        // Populate the dropdown results list
        results.forEach(result => {
        
          const matchedDoc = documents.find(doc => doc.id == result.ref);
        
          const li = document.createElement('li');
          li.className = 'result-item';

          const a = document.createElement('a');
          a.href = matchedDoc.uri;
          a.style.textDecoration = 'none'; // Remove the default underline from the link

          const div = document.createElement('div');
          div.className = 'result-title';
          div.textContent = matchedDoc.title + ' | ' + matchedDoc.sub_title;
          a.appendChild(div);

          const div2 = document.createElement('div');
          div2.className = 'result-description';
          div2.textContent = matchedDoc.body.substring(0, 150) + '...';
          a.appendChild(div2);

          li.appendChild(a);
          resultsList.appendChild(li);

        });

        resultsList.style.display = results.length ? 'block' : 'none';

      });

      // Hide the dropdown results list when clicking outside the search box
      document.addEventListener('click', function (event) {
        if (!event.target.closest('#search-box')) {
          resultsList.style.display = 'none';
        }
      });

      input.addEventListener('keydown', function (e) {
        if (e.key === 'ArrowUp') {
          e.preventDefault(); // Prevent scrolling the page
          selectResult(selectedIndex - 1);
        } else if (e.key === 'ArrowDown') {
          e.preventDefault(); // Prevent scrolling the page
          selectResult(selectedIndex + 1);
        } else if (e.key === 'Enter' && selectedIndex >= 0 && selectedIndex < resultsList.children.length) {
          
          window.location.href = resultsList.children[selectedIndex].children[0].href;
        }
      });

      let selectedIndex = -1;

      function selectResult(index) {
        // Deselect the previously selected item
        if (selectedIndex >= 0 && selectedIndex < resultsList.children.length) {
          resultsList.children[selectedIndex].classList.remove('bg-gray-200');
        }

        selectedIndex = index;

        // Select the new item
        if (selectedIndex >= 0 && selectedIndex < resultsList.children.length) {
          resultsList.children[selectedIndex].classList.add('bg-gray-200');

          // Smoothly scroll to the selected item
          resultsList.children[selectedIndex].scrollIntoView({
            block: 'nearest',
            behavior: 'smooth'
          });
        }
      }


      document.addEventListener('keydown', (e) => {

        if (e.key.toLowerCase() == 'k' && e.ctrlKey) {
              // Add your code here
              
            e.preventDefault(); // Prevent scrolling the page

            console.log("yoyo");

              input.focus();
          }
      });


    });



  </script>

    <link rel="stylesheet"
          href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/agate.min.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>

    <script>hljs.highlightAll();</script>
</head>

<meta name="locale" content="fr_CA">

<nav class="py-4 sticky top-0 z-40 lg:z-50 w-full bg-white border-b">
    <div id="navigation-content" class="grid grid-cols-12">
        <div class="float-left pl-4 col-span-2">
            <a href="/fr_CA" id=""><img class="object-contain h-10 mt-2	"
                src="/assets/images/logo-rounded.png"
                alt="Invoice Ninja logo"/>
            </a>    
        </div>
                <div class="search-wrapper w-full col-span-5 flex justify-center"  id="search-box">
                <input type="text" id="search-input" placeholder="Search Invoice Ninja... (Ctrl K)" class="h-14 text-lg focus:outline-none rounded-mdsm:max-w-xs">
            <ul id="results-list" class="results-list"></ul>
        </div>
        <!-- <input type="text" placeholder="Recherche rapide" id="topSearchBox" data-lpignore="true"
                class="pb-1 border-b hover:border-ninja-blue focus:border-ninja-blue focus:outline-none"> -->
                <div id="right-side-items" class="text-sm w-full col-span-5 flex flex-grow justify-end pr-5">
            <div class="hidden md:hidden lg:block md:space-x-2">
                <span>
                       <a href="/fr_CA/user-guide" class="py-2 border-b border-transparent hover:border-ninja-blue">Guide de l&#039;utilisateur</a>
                </span>
                <span>
                       <a href="https://api-docs.invoicing.co/" target="_blank"
                   class="py-2 border-b border-transparent hover:border-ninja-blue">Documentation API</a>
                </span>
                <span>
                <a target="_blank" href="https://invoicing.co" class="px-5 py-2 border rounded-full hover:border-ninja-blue">Accéder à l&#039;application</a>
                </span>
                <span>
                <select id="locale" onchange="this.options[this.selectedIndex].value && (window.location = '/' + this.options[this.selectedIndex].value);" class="mt-2 rounded-md border-0 py-1.5 pl-1 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6">
                    <option value="en">EN</option>
                    <option value="fr_CA">Fr (CA)</option>
                </select>
                </span>
            </div>
            <div class="flex flex-col lg:hidden">
                <button id="mobile-menu-toggle" class="focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-menu">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>
            
        </div>
    </div>
    <div id="mobile-menu" class="hidden px-4 pt-4 flex flex-col">
        <a href="/fr_CA/getting-started"
           class="py-2 border-b border-transparent hover:border-ninja-blue"> Guide de l&#039;utilisateur </a>
        <a href="https://api-docs.invoicing.co/" target="_blank"
           class="py-2 border-b border-transparent hover:border-ninja-blue"> Documentation API </a>
        <a href="https://invoicing.co" target="_blank"
           class="py-2 border-b border-transparent hover:border-ninja-blue"> Accéder à l&#039;application</a>
        <select id="locale_mobile" onchange="this.options[this.selectedIndex].value && (window.location = '/' + this.options[this.selectedIndex].value);" class="mt-2 rounded-md border-0 py-1.5 pl-3 pr-5 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6">
            <option value="en">EN</option>
            <option value="fr_CA">Fr (CA)</option>
        </select>
    </div>
</nav>

<script>

    let element = document.getElementById('locale_mobile');
    element.value = document.querySelector('meta[name="locale"]').content;

    let element2 = document.getElementById('locale');
    element2.value = document.querySelector('meta[name="locale"]').content;

</script>
<body class="font-sans antialiased text-gray-900 bg-white ">
        <div class="hidden top-0 absolute z-40 bg-white w-full h-screen" id="mobile-menu-overlay">
       <div class="p-6 flex items-top justify-between">
           <div>
                                  <div clasS="mb-8">
                       <a class="block hover:text-ninja-blue font-semibold uppercase "
                          href="/fr_CA/self-host-installation">Auto-hébergement</a>

                       <div class="mt-2">
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/getting-started">Aperçu</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/self-host-installation">Installation</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/self-host-troubleshooting">Dépannage</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/self-host-updating">Mise à jour</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/env-variables">Variables .env</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/self-host-debug-mode">Mode débogage</a>
                                                  </div>
                   </div>
                                  <div clasS="mb-8">
                       <a class="block hover:text-ninja-blue font-semibold uppercase "
                          href="/fr_CA/legal/license">Légal</a>

                       <div class="mt-2">
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/license">Licence</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/terms_of_service">Conditions d&#039;utilisation</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/data_privacy">Protection des données</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/self_hosting_data">Protection des données auto-hébergées</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/self_hosting_terms">Conditions d&#039;utilisation auto-hébergées</a>
                                                          <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/gdpr">RGPD</a>
                                                  </div>
                   </div>
                          </div>
           <div>
                <button onclick="document.getElementById('mobile-menu-overlay').classList.add('hidden');">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
           </div>
       </div>
    </div>

    <div class="max-w-12xl grid grid-cols-12 py-2 px-2 lg:mx-auto">
        <div class="hidden space-y-6 md:block lg:col-span-2">
            <div class="hidden lg:block fixed mt-2 h-full overflow-y-auto pb-32 pr-16 pl-4">
                                    <div clasS="mb-8">
                        <a class="block hover:text-ninja-blue font-semibold uppercase "
                          href="/fr_CA/self-host-installation">Auto-hébergement</a>


                        <div class="mt-2">
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/getting-started">Aperçu</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/self-host-installation">Installation</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/self-host-troubleshooting">Dépannage</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/self-host-updating">Mise à jour</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/env-variables">Variables .env</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/self-host-debug-mode">Mode débogage</a>
                                                    </div>
                    </div>
                                    <div clasS="mb-8">
                        <a class="block hover:text-ninja-blue font-semibold uppercase "
                          href="/fr_CA/legal/license">Légal</a>


                        <div class="mt-2">
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/license">Licence</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/terms_of_service">Conditions d&#039;utilisation</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/data_privacy">Protection des données</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/self_hosting_data">Protection des données auto-hébergées</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/self_hosting_terms">Conditions d&#039;utilisation auto-hébergées</a>
                                                            <a class="block hover:text-ninja-blue py-1 "
                                  href="/fr_CA/legal/gdpr">RGPD</a>
                                                    </div>
                    </div>
                            </div>
        </div> <!-- End of sidebar -->

        <div class="col-span-12 md:col-span-8 prose mx-auto max-w-max" id="page-content">
            <div class="block lg:hidden flex flex-col mb-4 lg:mb-0">
                <button onclick="document.getElementById('mobile-menu-overlay').classList.remove('hidden');">&#8592; Documentation</button>
            </div>

            <h1>Installation</h1>

<h2>Exigences du serveur</h2>

<p>Invoice Ninja a quelques exigences système. Construit sur la base de <a href="https://www.laravel.com/fr_CA/">Laravel</a>, il requiert un serveur PHP et MySQL au minimum avec les versions et extensions suivantes installées.</p>

<p><div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Vous devez configurer cette version complètement à partir de zéro. N'essayez pas d'écraser votre ancienne version d'Invoice Ninja (4.x.x) avec cette version, car les deux bases de code sont complètement différentes.</span>
</div></p>

<ul>
<li>PHP 8.1 avec les extensions suivantes

<ul>
<li>bcmath</li>
<li>ctype</li>
<li>fileinfo</li>
<li>gd</li>
<li>mbstring</li>
<li>openssl</li>
<li>PDO</li>
<li>tokenizer</li>
<li>xml</li>
<li>curl</li>
<li>zip</li>
<li>gmp</li>
<li>iconv</li>
<li>mysqli</li>
<li>fpm (si vous utilisez NGINX)</li>
</ul></li>
<li>MySQL 5.7+ ou MariaDB 10.3+</li>
<li>NGINX ou Apache</li>
</ul>

<p>Sur Ubuntu, cela devrait être aussi simple que d'exécuter :</p>

<pre><code class="language-bash">sudo apt install php8.2-bcmath php8.2-gmp php8.2-fileinfo \\
    php8.2-gd php8.2-mbstring php8.2-pdo php8.2-xml \\
    php8.2-curl php8.2-zip php8.2-gmp php8.2-mysql php8.2-fpm
</code></pre>

<h2>Installation de Invoice Ninja</h2>

<h3>Ubuntu 20.04 (Recommandé)</h3>

<p>Le membre de la communauté TechnicallyComputers a un guide étape par étape très utile sur comment installer Invoice Ninja v5 à partir de zéro sur Ubuntu, vous pouvez accéder au guide <a href="https://forum.invoiceninja.com/t/install-invoice-ninja-v5-on-ubuntu-20-04/4588">ici</a></p>

<h3>Installation sur CentOS 8</h3>

<p>Si CentOS est plus votre style, le membre de la communauté TechnicallyComputers a un guide d'installation étape par étape très complet <a href="https://forum.invoiceninja.com/t/install-invoice-ninja-v5-on-centos-8/4293">ici</a>.</p>

<h3>Installation sur Arch</h3>

<p>Si Arch Linux est plutôt votre style, le membre de la communauté brackenhill-mob a un guide d'installation étape par étape très complet <a href="https://forum.invoiceninja.com/t/howto-install-invoice-ninja-v5-on-arch-linux/6196">ici</a></p>

<h3>Installation sur Enterprise Linux</h3>

<p>TechnicallyComputers a également un guide pour l'installation d'Invoice Ninja sur Enterprise Linux <a href="https://forum.invoiceninja.com/t/install-invoice-ninja-v5-on-enterprise-linux-8/4293">ici</a></p>

<h3>Installation avec Docker</h3>

<p>Nous avons un dépôt dédié avec des instructions détaillées sur comment commencer <a href="https://github.com/invoiceninja/dockerfiles">ICI</a>.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/xo6a3KtLC2g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p><div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Si vous apportez des modifications à votre fichier env, n'oubliez pas de redémarrer le conteneur pour que les modifications prennent effet !</span>
</div></p>

<h3>Télécharger le zip préconstruit. (Avancé)</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/i04EX7WXTVE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>Un fichier zip préconstruit peut être téléchargé depuis notre page de versions GitHub <a href="https://github.com/invoiceninja/invoiceninja/releases">ici</a>. Vous devrez télécharger le package nommé <b>invoiceninja.zip</b></p>

<p>Décompressez ce fichier dans le répertoire de l'hôte virtuel que vous avez créé.</p>

<h4>Permissions de fichier</h4>

<p><div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Assurez-vous que les permissions de fichier ont été définies pour l'utilisateur du serveur Web. Par exemple, sous Ubuntu, il s'agit de www-data si vous avez configuré un hôte virtuel avec un répertoire racine de <code>/var/www/html</code>, vous définiriez la propriété comme ceci.</span>
</div></p>

<pre><code class="language-bash">sudo chown -R www-data:www-data /var/www/html
sudo find ./ -type d -exec chmod 755 {} \;
</code></pre>

<p>Traduction des commentaires de code :</p>

<pre><code># Changez la propriété du fichier récursivement dans /var/www/html
sudo chown -R www-data:www-data /var/www/html

# Réglez les autorisations sur 755 pour tous les dossiers (type d) récursivement
sudo find ./ -type d -exec chmod 755 {} \;
</code></pre>

<h5>Configuration du serveur Web</h5>

<p>Un exemple de configuration NGINX est fourni ci-dessous, il suppose que vous avez PHP 8.1 installé avec l'extension PHP FPM installée</p>

<pre><code class="language-bash">server {

listen 80;
server_name invoiceninja.test;
root /var/www/invoiceninja/public;
index index.php index.html index.htm;
client_max_body_size 20M;

gzip on;
gzip_types      application/javascript application/x-javascript text/javascript text/plain application/xml application/json;
gzip_proxied    no-cache no-store private expired auth;
gzip_min_length 1000;

location / {
    try_files $uri $uri/ =404;
}

location ~* \.pdf$ {
    add_header Cache-Control no-store;
}

if (!-e $request_filename) {
    rewrite ^(.+)$ /index.php?q= last;
}

location ~ \.php$ {
include snippets/fastcgi-php.conf;
fastcgi_pass unix:/run/php/php8.2-fpm.sock;
}

location ~ /\.ht {
    deny all;
}

}
</code></pre>

<p><div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Avertissement de performance!</p>

<p>Activez gzip dans la configuration de votre serveur web, cela améliorera considérablement le temps de chargement de l'application! Veuillez consulter la configuration nginx ci-dessus pour un exemple de chargement des composants de l'application avec gzip.</span>
</div></p>

<h5>Configuration du serveur de base de données</h5>

<p>Créez une base de données sur votre serveur compatible MySQL et ajoutez un utilisateur ayant un accès complet à la base de données. La configuration de la base de données n'est pas couverte par cet article, vous pouvez trouver plus d'informations <a href="https://dev.mysql.com/doc/refman/8.0/en/creating-database.html">ici</a></p>

<h5>Configuration du Cron"</h5>

<p><div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Assurez-vous de définir le planificateur sous l'utilisateur du serveur Web, c'est-à-dire <code>sudo -u www-data crontab -e</code></span>
</div></p>

<p>Invoice Ninja dépend fortement de Laravel Scheduler, pour cela il faut configurer une tâche cron. Modifiez votre crontab et ajoutez l'enregistrement suivant.</p>

<pre><code class="language-bash">* * * * * cd /chemin-vers-votre-projet &amp;&amp; php artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1
</code></pre>

<p>Si vous utilisez un hébergement partagé, vous devrez ajouter un paramètre supplémentaire à la commande cron qui ressemble à ceci :</p>

<pre><code>* * * * * cd /chemin/vers/dossier/racine &amp;&amp; /usr/bin/php -d register_argc_argv=On artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1
</code></pre>

<h3>Installation à partir de git (Avancé)</h3>

<p>Pour les utilisateurs avancés, l'installation de l'application à partir de Github peut être effectuée en deux étapes suivantes</p>

<p>``````markdown</p>

<pre><code class="language-bash">git clone -b v5-stable --single-branch https://github.com/invoiceninja/invoiceninja.git

composer create-project --no-dev
</code></pre>

<h3>Étapes finales de configuration</h3>

<p>Une fois que vous avez configuré votre hôte virtuel, copiez le même fichier .env </p>

<pre><code class="language-bash">.env.exemple
</code></pre>

<pre><code class="language-bash">.env

</code></pre>

<p>
Ensuite, créez une base de données et dirigez votre navigateur vers http://votre.domaine.com/setup - le processus de configuration vérifiera un certain nombre de paramètres système tels que la génération de PDF, les paramètres de base de données et de courrier, et vous permettra également de configurer le premier compte sur le système, cliquez sur Soumettre et l'application configurera votre application et vous redirigera vers la page de connexion</p>

<h4>Configuration de Cron</h4>

<p>Invoice Ninja dépend fortement du planificateur Laravel. Pour que cela fonctionne, il est nécessaire de configurer une tâche cron. Éditez votre crontab et entrez l'enregistrement suivant</p>

<p><div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>Assurez-vous de définir le planificateur sous l'utilisateur du serveur web, c'est-à-dire <code>sudo -u www-data crontab -e</code></span>
</div></p>

<pre><code class="language-bash"># Ceci est un commentaire
* * * * * cd /chemin-vers-votre-projet &amp;&amp; php artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1
</code></pre>

<p>Certains serveurs Web exigent que le Cronjob se termine par <code>&gt; /dev/null 2&gt;&amp;1</code> au lieu de <code>&gt;&gt; /dev/null 2&gt;&amp;1</code> pour fonctionner.
Vérifiez également si votre Cronjob de serveur Web doit être défini avec <code>/private_html/</code> au lieu de <code>/public_html/</code> dans le chemin.
Et parfois, il suffit de mettre <code>php</code> au lieu de <code>/opt/alt/php73/usr/bin/php</code> dans la commande du planificateur de cronjob pour exécuter.</p>

<p>Si vous rencontrez toujours des erreurs, il peut être utile de supprimer temporairement <code>&gt;&gt; /dev/null 2&gt;&amp;1</code> du cron, cela devrait afficher le cron dans le fichier <code>cron.log</code></p>

<p>Si vous rencontrez des problèmes avec vos tâches cron, jetez un coup d'œil à la section de dépannage <a href="https://invoiceninja.github.io/fr_CA/self-host-troubleshooting/#cron-not-running-queue-not-running">ici</a></p>

<p>Si vous souhaitez améliorer les performances de votre installation d'Invoice Ninja, activer le système de file d'attente améliorera considérablement les performances de l'application.</p>

<p>Si vous avez un accès root à votre système, suivez simplement le <a href="https://laravel.com/fr_CA/8.x/queues#supervisor-configuration">guide</a> de Laravel pour configurer le service supervisor afin de démarrer et redémarrer votre file d'attente.</p>

<p>Membre du forum @link470 a également le guide suivant pour configurer le processus Supervisor sur Ubuntu 22.04 en utilisant les étapes suivantes :</p>

<h4>Superviseur pour Invoice Ninja Ubuntu 22.04 LTS</h4>

<pre><code class="language-bash">$ sudo apt-get install supervisor
</code></pre>

<p>Ensuite, créez un fichier de configuration pour Invoice Ninja en vous rendant dans le répertoire de configuration de Supervisor et en lançant votre éditeur de texte préféré avec le nom de fichier à utiliser. Vous pouvez choisir n'importe quel nom de fichier se terminant par .conf. J'utilise vi.</p>

<pre><code class="language-bash">$ cd /etc/supervisor/conf.d
$ sudo vi invoiceninja-worker.conf
</code></pre>

<p>Dans le nouveau fichier invoiceninja-worker.conf, entrez ce qui suit :.</p>

<pre><code class="language-bash">[program:invoiceninja-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /chemin/vers/invoiceninja/artisan queue:work --sleep=3 --tries=3 --max-time=3600
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=www-data
numprocs=8
redirect_stderr=true
stdout_logfile=/var/log/invoiceninja-worker.log
stopwaitsecs=3600
</code></pre>

<p>Il y a 4 choses principales à changer, indiquées en gras ci-dessus:</p>

<p>programme : Le nom du programme que vous utiliserez pour le travailleur
commande : Le chemin vers le fichier artisan dans la racine du répertoire de l'application Invoice Ninja
utilisateur : L'utilisateur qui exécutera Supervisor. Généralement, il s'agit de l'utilisateur du serveur web (le même utilisateur qui possède les fichiers Invoice Ninja)
stdout_logfile : En option, inclure le chemin vers un fichier de journal pour le travailleur Supervisor
Une fois ces modifications effectuées pour s'adapter à votre environnement, enregistrez le fichier.</p>

<p>Si vous avez choisi de définir un chemin pour le fichier journal, assurez-vous que le fichier journal est créé et que le compte utilisateur configuré y a accès. Dans cet exemple, le journal est stocké dans /var/log.</p>

<pre><code class="language-bash">$ cd /var/log
$ sudo touch invoiceninja-worker.log
$ sudo chown www-data:www-data invoiceninja-worker.log
</code></pre>

<p>Maintenant que Supervisor est configuré, nous pouvons lire le fichier de configuration :</p>

<pre><code class="language-bash">$ sudo supervisorctl reread
</code></pre>

<p>Ceci devrait nous indiquer que le nom de notre configuration (invoiceninja-worker) est disponible. La commande ci-dessus devra également être relancée chaque fois que le fichier de configuration est mis à jour.</p>

<p>Ensuite, ajoutez la nouvelle configuration au groupe de processus pour Supervisor (cette commande doit également être exécutée chaque fois que la configuration est mise à jour)</p>

<pre><code class="language-bash">$ sudo supervisorctl update
</code></pre>

<p>Maintenant, démarrez le travailleur Supervisor</p>

<pre><code class="language-bash">$ sudo supervisorctl start invoiceninja-worker:*
</code></pre>

<p>Exécuter la commande suivante affichera les processus de travail comme EN COURS (sur mon installation, je vois 8 processus de travail, numérotés de 00 à 07)</p>

<pre><code class="language-bash">$ sudo supervisorctl status
</code></pre>

<p>Maintenant que le Superviseur est configuré, nous devons indiquer à Invoice Ninja de l'utiliser réellement.</p>

<p>Modifier le fichier .env pour Invoice Ninja</p>

<pre><code class="language-bash">$ sudo vi /chemin/vers/invoiceninja/.env
</code></pre>

<p>Modifier la ligne suivante pour passer de sync à base de données, et enregistrer le fichier</p>

<pre><code class="language-bash">QUEUE_CONNECTION=database
</code></pre>

<p>Finalement, maintenant que tout est configuré, rechargez la configuration pour Invoice Ninja et redémarrez la file d'attente. J'utilise www-data pour cet exemple comme utilisateur du serveur Web.</p>

<pre><code class="language-bash">$ cd /path/to/invoiceninja/
$ sudo -u www-data php artisan optimize
$ sudo -u www-data php artisan queue:restart

</code></pre>

<p>Traduction des commentaires de code :</p>

<pre><code class="language-bash">$ cd /path/to/invoiceninja/
$ sudo -u www-data php artisan optimize
$ sudo -u www-data php artisan queue:restart
</code></pre>

<p>C'est tout! Vous devriez maintenant avoir une configuration Supervisor fonctionnelle pour Invoice Ninja.</p>

<p>Si vous êtes sur un hébergement partagé, il est possible de faire fonctionner les files d'attente en définissant un nouveau cron avec la configuration suivante :</p>

<pre><code>*/5 * * * * cd /chemin/vers/le/dossier/racine &amp;&amp; /usr/bin/php -d register_argc_argv=On artisan queue:work --stop-when-empty
</code></pre>

<p>Certaines personnes ont différentes configurations d'hébergement web, donc cela pourrait également fonctionner :</p>

<pre><code>*/5 * * * * php /home/admin/domains/site.com/private_html/invoices_site/artisan queue:work --stop-when-empty
</code></pre>

<p>Ce cron démarrera un travailleur de file d'attente toutes les 5 minutes et exécutera toutes les tâches qui sont dans la file d'attente, puis se terminera proprement. Cela signifie que les e-mails / notifications peuvent être mis en file d'attente pendant une courte période avant d'être exécutés. Si ce délai est acceptable, c'est un excellent moyen de faire fonctionner les files d'attente sur un hébergement mutualisé.","97":"Si vous préférez gérer les files d'attente avec Supervisor, vous voudrez alors désactiver les commandes internes d'Invoice Ninja qui démarrent la file d'attente. Pour ce faire, définissez simplement la variable .env suivante</p>

<pre><code>INTERNAL_QUEUE_ENABLED=false
</code></pre>

<p>Vous aurez alors le plein contrôle sur la file d'attente.</p>

<h2>Hébergement partagé</h2>

<h4>Exigences du serveur</h4>

<p>Nous avons testé Invoice Ninja v5 sur un hébergement mutualisé et pouvons confirmer qu'il fonctionne. Softaculous dispose d'un installateur en un clic qui simplifie l'ensemble du processus de configuration. Cependant, si vous n'avez pas Softaculous disponible, il peut toujours être possible d'installer Invoice Ninja. Plusieurs vérifications sont nécessaires avant de confirmer si votre hébergeur mutualisé dispose des modules correctement activés. Invoice Ninja repose sur :</p>

<ul>
<li>proc_open</li>
<li>exec</li>
<li>open_basedir</li>
<li>fpassthru</li>
</ul>

<p>Sans ces modules, vous ne pourrez pas exécuter Invoice Ninja. Nous incluons certaines vérifications préalables de ces modules dans le processus de configuration, mais il est préférable de vérifier auprès de votre hébergeur qu'ils prennent en charge ces modules. Certains hébergeurs choisissent de désactiver ces modules car ils les considèrent comme des risques pour la sécurité.</p>

<h4>Configuration de la base de données</h4>

<p>Créez une base de données compatible MySQL dans le panneau de contrôle de votre hébergement partagé, ainsi qu'un utilisateur de base de données. Notez le nom de la base de données, le nom d'utilisateur et le mot de passe car vous en aurez besoin plus tard. Assurez-vous que votre utilisateur de base de données a un accès complet à la base de données que vous venez de créer.</p>

<h4>Télécharger l'élément de la version</h4>

<p>Téléchargez la dernière version depuis notre page des <a href="https://github.com/invoiceninja/invoiceninja/releases">Versions</a>. Notez que vous voudrez trouver la dernière version qui contiendra 3 fichiers, celui dont vous avez besoin sera annoté comme invoiceninja.zip.</p>

<p>Téléchargez ce fichier sur votre hébergeur partagé, généralement si votre hébergeur utilise le standard de l'industrie cPanel, vous voudrez télécharger le fichier <strong>invoiceninja.zip</strong> dans le répertoire <strong>public_html</strong>. Une fois le téléchargement terminé, utilisez le gestionnaire de fichiers pour décompresser le fichier.</p>

<p>Vous devrez également copier/renommer le fichier .env.example en .env</p>

<h4>Exécuter la configuration</h4>

<p>Naviguez vers https://your.url.com/setup et remplissez le formulaire. Le processus de configuration effectuera quelques vérifications préalables, puis tentera d'exécuter la configuration. Si cela réussit, vous serez redirigé vers le portail administrateur. Si la configuration échoue pour une raison quelconque, vous serez renvoyé à l'écran de configuration avec un message d'erreur, il se peut que des erreurs supplémentaires soient signalées dans <strong>storage/logs/laravel.log</strong> qui fourniront plus d'informations sur l'échec de la configuration.</p>

<p>Si vous voyez une <strong>erreur de serveur web 404</strong> et utilisez <strong>sub.domain.com</strong>, assurez-vous de pointer le chemin pour le sous-domaine vers le dossier <code>/public</code> à partir du fichier extrait invoiceninja.zip, par exemple: <code>/domains/domain.com/public_html/invoices2/public/</code></p>

<h5>Ajouter la tâche cron</h5>

<p>Ajoutez la tâche cron du planificateur Laravel, assurez-vous d'inclure le chemin complet, pour un hôte cPanel, cela devrait ressembler à ceci:</p>

<pre><code>* * * * * cd /chemin/vers/dossier/racine &amp;&amp; /usr/bin/php -d register_argc_argv=On artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1
</code></pre>

<h2>Configuration de courriel</h2>

<p>Lors de la configuration de votre courriel, veuillez vous assurer que tous les champs sont remplis. En particulier, vous <em>devez</em> inclure MAIL_FROM_ADDRESS et MAIL_FROM_NAME pour éviter les erreurs telles que</p>

<pre><code class="language-bash">Adresse dans la boîte aux lettres donnée [] ne respecte pas la RFC 2822, 3.6.2.
</code></pre>

<p>Voici un exemple complet - en utilisant Gmail comme exemple.</p>

<pre><code class="language-bash">MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME="votre_adresse_email@gmail.com"
MAIL_PASSWORD="votre_mot_de_passe_noubliez_pas_les_guillemets!"
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="votre_adresse_email@gmail.com"
MAIL_FROM_NAME="Nom Complet Avec Guillemets Doubles"
</code></pre>

<p>Je suis désolé, je ne peux pas traiter cette demande car il n'y a pas de texte en anglais à traduire. Merci de me fournir le texte en anglais pour que je puisse vous aider à le traduire en français canadien.</p>

<p><div class="p-5 bg-gray-200 border-l-4 border-red-500">
    <span>REMARQUE : si vous utilisez le cryptage SSL, le MAIL_PORT est 465. Le cryptage TLS est sur le port 587.</span>
</div></p>

<pre><code><br />### Configurations de courrier individuelles par entreprise

À partir de la v5.5.38, nous prenons en charge les configurations de messagerie par entreprise.

Qu'est-ce que cela signifie?

Par exemple, si vous avez deux sociétés, Acme co et Ninja co, vous pouvez créer des configurations de serveur de messagerie distinctes pour chaque entreprise.

Pour configurer cela, vous devrez préfixer votre .env avec la clé principale de l'entreprise, c'est-à-dire dans votre base de données, ouvrez la table des entreprises et si la colonne ID principale est 1 pour Acme co, ce serait la configuration

</code></pre>

<p>1_MAIL_HOST=
1_MAIL_PORT=
1_MAIL_USERNAME=null
1_MAIL_PASSWORD=null
1_MAIL_ENCRYPTION=null</p>

<pre><code><br />Si l'identifiant de l'entreprise Ninja Co est 5

</code></pre>

<p>5_MAIL_HOST=
5_MAIL_PORT=
5_MAIL_USERNAME=null
5_MAIL_PASSWORD=null
5_MAIL_ENCRYPTION=null</p>

<pre><code><br />## Conversion de devise

&lt;p&gt;Invoice Ninja prend en charge &lt;a href="https://openexchangerates.org/"&gt;Open Exchange&lt;/a&gt; pour la conversion de devises.
Open Exchange offre actuellement une version gratuite qui convient pour les mises à jour quotidiennes des taux de change.
Il suffit d'insérer une clé API Open Exchange dans votre fichier .env pour activer les mises à jour des taux de change:&lt;/p&gt;

```bash
OPENEXCHANGE_APP_ID=votre_clé_api_open_exchange_ici
</code></pre>

<p>Les devises sont mises à jour automatiquement en utilisant le planificateur. Si les devises ne sont pas disponibles dans l'interface utilisateur, veuillez vérifier la table de la base de données <code>currencies</code> et vous assurer que les champs <code>exchange_rate</code> contiennent des valeurs réalistes.</p>

            <a href="https://github.com/invoiceninja/invoiceninja.github.io/blob/v5-rework/source/fr_CA/self-host-installation.md"
               class="pt-4 border-t inline-flex items-center w-full block">
                <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="feather feather-github">
                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                </svg>
                <span class="ml-2">Want to contribute? Edit this page on GitHub!</span>
            </a>
        </div> <!-- End of main content -->

        <div class="hidden md:block col-span-2 p-4">
            <div class="fixed overflow-y-auto pr-4 h-full pl-4 pb-32 text-sm" id="toc-container">
                <!-- Placeholder for table of contents -->
                <span class="text-sm uppercase block mb-3 text-ninja-blue">On this page</span>
            </div>
        </div>
    </div>
        <script src="/assets/build/js/main.js?id=5d8f1025c2be8c2903a2ea7ba7775489"></script>

    <script>
        document.getElementById('mobile-menu-toggle').addEventListener('click', () => {
            let mobileMenu = document.getElementById('mobile-menu');

            if (mobileMenu.classList.contains('hidden')) {
                return mobileMenu.classList.remove('hidden');
            }

            return mobileMenu.classList.add('hidden');
        });
    </script>

    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script type="text/javascript">
        docsearch({
            apiKey: '4816218e8381d5a17beacd84823e9ea3',
            indexName: 'invoiceninja',
            inputSelector: '#topSearchBox',
            debug: false,
            searchParameters: {
                facetFilters: ['language:fr_CA'],
            },
        });
    </script>
        <script type="text/javascript">
        docsearch({
            apiKey: '4816218e8381d5a17beacd84823e9ea3',
            indexName: 'invoiceninja',
            inputSelector: '#indexSearchBox',
            debug: false,
            searchParameters: {
                facetFilters: ['language:fr_CA'],
            },
        });
    </script> -->

<style>
.video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.video_container {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 56.25%;
}

</style>
</body>

</html>
